(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{23:function(e,t,r){e.exports=r.p+"static/media/no_poster.eac23845.jpg"},25:function(e,t,r){e.exports=r(42)},35:function(e,t,r){},36:function(e,t,r){},37:function(e,t,r){},38:function(e,t,r){},39:function(e,t,r){},40:function(e,t,r){},41:function(e,t,r){},42:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),o=r(7),s=r.n(o),c=r(4),u=r(20),i=r(21),p=r(2),l=r(24),h=Object(c.c)({postersState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_POSTER_SUCCESS":return Object.assign({},e,{posters:[].concat(Object(l.a)(e.posters||[]),[{poster:t.payload}])});default:return e}},showsState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_SHOWS_SUCCESS":case"SEARCH_SHOWS_SUCCESS":return Object(p.a)({},e,{shows:t.payload});default:return e}},queryState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GENERATE_SORTING_QUERY":return Object.assign({},e,{queries:Object(p.a)({},e.queries,{sorting:t.payload})});case"GENERATE_TITLE_QUERY":return Object.assign({},e,{queries:Object(p.a)({},e.queries,{title:t.payload})});case"GENERATE_YEAR_QUERY":return Object.assign({},e,{queries:Object(p.a)({},e.queries,{year:t.payload})});case"GENERATE_PAGE_QUERY":case"GENERATE_PREV_PAGE_QUERY":case"GENERATE_NEXT_PAGE_QUERY":case"FETCH_CURRENT_PAGE":return Object.assign({},e,{queries:Object(p.a)({},e.queries,{page:t.payload})});case"FETCH_PAGES_QUANTITY":return Object.assign({},e,{queries:Object(p.a)({},e.queries,{pagesTotal:t.payload})});default:return e}}}),f=(Object(u.createLogger)(),window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||c.d),g=Object(c.e)(h,f(Object(c.a)(i.a))),d=r(14),E=r(8),y=r(9),m=r(11),b=r(10),v=r(5),S=r(12),T=r(1),w=r.n(T),O=r(3),j=function(e){return{type:"FETCH_SHOWS_SUCCESS",payload:e}};function C(e){return{type:"FETCH_PAGES_QUANTITY",payload:e}}r(35);var _=function(e){function t(){var e,r;Object(E.a)(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(r=Object(m.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(a)))).clearInput=function(){s.a.findDOMNode(r.refs.currentPageInput).value=""},r}return Object(S.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=this,t=Math.max(+this.props.pagesTotal,1),r=Math.min(Math.max(+this.props.currentPage,1),t),n="Current page: ".concat(r);return a.a.createElement("div",{className:"pagination"},a.a.createElement("button",{disabled:r<2,value:r,onClick:function(){e.props.onChange(Math.max(+r-1,1)),e.clearInput()}},"<"),a.a.createElement("button",{disabled:1===r,onClick:function(){e.props.onChange(1),e.clearInput()}},"1"),a.a.createElement("input",{ref:"currentPageInput",type:"text",placeholder:n,onFocus:function(e){return e.target.placeholder=""},onBlur:function(e){return e.target.placeholder=n},onKeyUp:function(t){var r=+t.target.value;clearTimeout(e.typingTimer),e.typingTimer=setTimeout(function(){isNaN(r)?alert("Sorry. There should be a number!"):(r=r>e.props.pagesTotal?e.props.pagesTotal:r)>0&&(e.props.onChange(r),e.clearInput())},1e3)}}),a.a.createElement("button",{value:t,onClick:function(){e.props.onChange(t),e.clearInput()}},"Last page: ",t),a.a.createElement("button",{disabled:r>t-1,value:r,onClick:function(){e.props.onChange(+r+1),e.clearInput()}},">"))}}]),t}(a.a.Component);r(36);var R=function(e){return a.a.createElement("select",{className:"sort-shows",name:"sortShows",defaultValue:"popular",onChange:function(t){return e.onSortingChange(t.target.value)}},a.a.createElement("option",{value:"popular"},"popular"),a.a.createElement("option",{value:"trending"},"trending"),a.a.createElement("option",{value:"played"},"played"),a.a.createElement("option",{value:"watched"},"watched"),a.a.createElement("option",{value:"anticipated"},"anticipated"))};r(37);var x=function(e){return a.a.createElement("input",{className:"search-by-title",type:"text",placeholder:"Title",onFocus:function(e){return e.target.placeholder=""},onBlur:function(e){return e.target.placeholder="Title"},onKeyUp:function(t){return e.onTitleChange(t.target.value)}})};r(38);var N=function(e){return a.a.createElement("input",{className:"search-by-year",type:"text",placeholder:"Year",onFocus:function(e){return e.target.placeholder=""},onBlur:function(e){return e.target.placeholder="Year"},onKeyUp:function(t){return e.onYearChange(t.target.value)}})};r(39);var P=function(e){return a.a.createElement("tr",{className:"show"},a.a.createElement("td",{className:"showNumber"},e.showNumber),a.a.createElement("td",{className:"showPoster"},a.a.createElement("img",{src:e.posterUrl,alt:e.posterAlt,height:"50px"})),a.a.createElement("td",{className:"title"},e.show.title),a.a.createElement("td",{className:"rating"},Math.round(100*e.show.rating)/100),a.a.createElement("td",{className:"year"},e.show.year),a.a.createElement("td",{className:"showId"},e.show.ids.tvdb),a.a.createElement("td",{className:"episodes"},e.show.aired_episodes))},k=r(23),q=r.n(k),Q=function(e){function t(e){return Object(E.a)(this,t),Object(m.a)(this,Object(b.a)(t).call(this,e))}return Object(S.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e,t,r,n=this,o=this.props.shows,s=this.props.queries?10*(this.props.queries.page-1):1;return o=o&&o.map(function(o,c){return s++,n.props.posters&&((t=n.props.posters.filter(function(e){return e.poster.thetvdb_id===o.ids.tvdb.toString()}))[0]&&t[0].poster.tvthumb?(e=t[0].poster.tvthumb[0].url,r=e):t[0]&&t[0].poster.tvposter?(e=t[0].poster.tvposter[0].url,r=e):(e=q.a,r="no poster")),a.a.createElement(P,{posters:n.props.posters,posterUrl:e,posterAlt:r,key:c+1,showNumber:s,show:o})}),a.a.createElement("tbody",null,o)}}]),t}(a.a.Component);r(40);function U(e){return a.a.createElement("table",null,a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("td",{colSpan:"2"},a.a.createElement(R,{onSortingChange:e.onSortingChange})),a.a.createElement("td",null,a.a.createElement(x,{onTitleChange:e.onTitleChange})),a.a.createElement("td",null,"Rank"),a.a.createElement("td",null,a.a.createElement(N,{onYearChange:e.onYearChange})),a.a.createElement("td",null,"TVDB Id"),a.a.createElement("td",null,"No of",a.a.createElement("br",null),"Episodes"))),a.a.createElement(Q,{posters:e.posters,shows:e.shows,queries:e.queries}))}function A(e){return Y.apply(this,arguments)}function Y(){return(Y=Object(O.a)(w.a.mark(function e(t){var r,n,a,o,s,c,u,i,l,h,f,g,d,E,y;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(r=t||{}).title,a=r.year,o=r.sorting,s=r.page,c=r.limit,u=(o&&"popular"!==o?["shows",o]:["search","show"]).join("/"),i={extended:"full",query:n||"",fields:"title",years:a,page:s||0,limit:c||10},l=Object.keys(i).filter(function(e){return"query"===e||i[e]}).map(function(e){return[e,i[e]].map(function(e){return encodeURIComponent(e)}).join("=")}).join("&"),h="https://api.trakt.tv/".concat(u,"?").concat(l),f={"Content-Type":"application/json","trakt-api-version":"2","trakt-api-key":"31f15cbdee3e55e2ceca6cd2e0e3ba9791b4f1feb1f7bab08c3d8ca6e018609a"},e.next=8,fetch(h,{headers:f});case 8:return g=e.sent,e.next=11,g.json();case 11:return d=(d=e.sent).map(function(e){var t=e||{},r=t.score,n=t.show,a=t.type;return Object(p.a)({score:r,type:a},n)}),E=g.headers.get("x-pagination-page"),y=g.headers.get("x-pagination-page-count"),e.abrupt("return",{json:d,currentPage:E,pagesTotal:y});case 16:case"end":return e.stop()}},e)}))).apply(this,arguments)}function G(e){return I.apply(this,arguments)}function I(){return(I=Object(O.a)(w.a.mark(function e(t){var r,n,a,o,s,c,u;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=["v3","tv",t].join("/"),n={api_key:"ab75dec43906f846e6200633b9ad43c7",client_key:"4c61b1676e8869c4553df95839f5a827"},a=Object.keys(n).filter(function(e){return n[e]}).map(function(e){return[e,n[e]].map(function(e){return encodeURIComponent(e)}).join("=")}).join("&"),o="https://private-anon-d2c67a30e4-fanarttv.apiary-proxy.com/".concat(r,"?").concat(a),s={"Content-Type":"application/json"},e.next=7,fetch(o,{headers:s});case 7:return c=e.sent,e.next=10,c.json();case 10:return u=e.sent,e.abrupt("return",u);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}var H=function(e){function t(e){var r;return Object(E.a)(this,t),(r=Object(m.a)(this,Object(b.a)(t).call(this,e))).fetchPosters=Object(O.a)(w.a.mark(function e(){var t,n;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.getState().showsState.shows||[],n=g.getState().postersState.posters,e.next=4,t.forEach(function(e){return n&&0!==n.filter(function(t){return+t.poster.thetvdb_id===e.ids.tvdb}).length?void 0:r.props.fetchPosterWithRedux(e.ids.tvdb)});case 4:case"end":return e.stop()}},e)})),r.fetchShowsByTitle=function(e){clearTimeout(r.typingTimer),r.typingTimer=setTimeout(Object(O.a)(w.a.mark(function t(){var n;return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r.generateTitleQuery(e),r.generatePageQuery(1),n=g.getState().queryState.queries,t.next=5,r.props.fetchShowsWithRedux(n);case 5:r.fetchPosters();case 6:case"end":return t.stop()}},t)})),500)},r.fetchShowsByYear=function(e){clearTimeout(r.typingTimer),r.typingTimer=setTimeout(Object(O.a)(w.a.mark(function t(){var n;return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!isNaN(e)){t.next=4;break}alert("Sorry. There should be a four-digit-number!"),t.next=10;break;case 4:return r.generateYearQuery(e),r.generatePageQuery(1),n=g.getState().queryState.queries,t.next=9,r.props.fetchShowsWithRedux(n);case 9:r.fetchPosters();case 10:case"end":return t.stop()}},t)})),500)},r.fetchShowsBySorting=function(){var e=Object(O.a)(w.a.mark(function e(t){var n;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r.props.generateSortingQuery(t),r.props.generatePageQuery(1),n=g.getState().queryState.queries,e.next=5,r.props.fetchShowsWithRedux(n);case 5:r.fetchPosters();case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),r.fetchShowsByPage=function(){var e=Object(O.a)(w.a.mark(function e(t){var n;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r.props.generatePageQuery(t),n=g.getState().queryState.queries,e.next=4,r.props.fetchShowsWithRedux(n);case 4:r.fetchPosters();case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),r.generateTitleQuery=r.props.generateTitleQuery.bind(Object(v.a)(r)),r.generateYearQuery=r.props.generateYearQuery.bind(Object(v.a)(r)),r.generatePageQuery=r.props.generatePageQuery.bind(Object(v.a)(r)),r.typingTimer=0,r.state={contentReady:!1},r}return Object(S.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(){var e=Object(O.a)(w.a.mark(function e(){return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.fetchShowsWithRedux();case 2:return e.next=4,this.fetchPosters();case 4:this.setState({contentReady:!0});case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement(_,{currentPage:this.pageCurrent,pagesTotal:this.pagesTotal,onChange:this.fetchShowsByPage}),a.a.createElement(U,{posters:this.props.posters,shows:this.props.shows,queries:this.props.queries,onSortingChange:this.fetchShowsBySorting,onTitleChange:this.fetchShowsByTitle,onYearChange:this.fetchShowsByYear}),a.a.createElement(_,{currentPage:this.pageCurrent,pagesTotal:this.pagesTotal,onChange:this.fetchShowsByPage.bind(this)}))}},{key:"pageCurrent",get:function(){return+((g.getState().queryState||{}).queries||{}).page||1}},{key:"pagesTotal",get:function(){return+((g.getState().queryState||{}).queries||{}).pagesTotal||1}}]),t}(a.a.Component);var B=Object(d.b)(function(e){return{posters:e.postersState.posters,shows:e.showsState.shows,queries:e.queryState.queries}},{fetchPosterWithRedux:function(e){return function(){var t=Object(O.a)(w.a.mark(function t(r){var n;return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,G(e);case 3:n=t.sent,r({type:"FETCH_POSTER_SUCCESS",payload:n}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),r({type:"FETCH_POSTER_ERROR"});case 10:case"end":return t.stop()}},t,null,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()},fetchShowsWithRedux:function(e){return function(){var t=Object(O.a)(w.a.mark(function t(r){var n,a,o,s;return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,A(e);case 3:n=t.sent,a=n.json,o=n.currentPage,s=n.pagesTotal,r(j(a)),r({type:"FETCH_CURRENT_PAGE",payload:o}),r(C(s)),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),r({type:"FETCH_SHOWS_ERROR"});case 15:case"end":return t.stop()}},t,null,[[0,12]])}));return function(e){return t.apply(this,arguments)}}()},generateTitleQuery:function(e){return{type:"GENERATE_TITLE_QUERY",payload:e}},generateYearQuery:function(e){return{type:"GENERATE_YEAR_QUERY",payload:e}},generateSortingQuery:function(e){return{type:"GENERATE_SORTING_QUERY",payload:e}},generatePageQuery:function(e){return{type:"GENERATE_PAGE_QUERY",payload:e}}})(H);r(41);s.a.render(a.a.createElement("div",null,a.a.createElement(d.a,{store:g},a.a.createElement(B,null))),document.getElementById("root"))}},[[25,1,2]]]);
//# sourceMappingURL=main.46b660a2.chunk.js.map